{
    "$schema": "https://vega.github.io/schema/vega-lite/v5.json",
    "data": {
       "url": "https://raw.githubusercontent.com/lucaswng/lucaswng.github.io/main/AsiaPopulation2020.csv"
    },
    "vconcat":[
    {
            "transform": [
                {"filter":{"param": "Country_highlight"}}
            ],

            "width": 300,
            "height": 300,
            "title":"Median Age and Fertility Rate of highest growth nations",
            "mark": "circle",
            "encoding": {
              "x": { 
                 "field": "Median_Age", 
                 "title": "Median Age",
                 "type": "quantitative",
                 "axis":{
                    "grid": false
                 }
              },
              "y": { 
                 "field": "Fertility_Rate", 
                 "title": "Fertility Rate",
                 "type": "quantitative", 
                 "sort": "ascending",
                 "axis":{
                    "grid": false
                 } 
              },            
              "color": {
                  "field": "Country", 
                  "type": "nominal"
                },
              "tooltip":[
                {"field": "Country", "type": "nominal"},
                {"field": "Median_Age", "type":"quantitative","title": "Median Age" },
                {"field": "Fertility_Rate", "type":"quantitative","title": "Fertility Rate (births per woman)"}
              ]
            }

    },
        {
            "params":[
                {
                "name": "Country_highlight",
                "select": {"type": "point", "fields": ["Country"]},
                "bind": "legend"
                }
                ],
            "transform": [
                {"filter":{ "field":"yearly_change", "gte": 1.65}}
             ],
            "width":700,
            "height":300,
            "title":"Greatest yearly change in population(%)",
            "mark": "bar",
            
                "encoding": {
                    "x": { 
                        "field": "Country", 
                        "type": "nominal",
                        "sort":"-y",
                        "axis":{
                        "grid": false
                            }
                        },
                    "y": { 
                        "field": "yearly_change",
                        "title":"Yearly % change in Population",    
                        "type": "quantitative", 
                        "sort": "ascending",
                        "axis":{
                            "grid": false
                            }
                        },
                    "color":{
                        "field": "Country",
                        "title":"Select Country",
                        "type": "nominal",
                        "scale": {
                            "domain":[
                                "Bahrain",
                                "Oman",
                                "Syria",
                                "State of Palestine",
                                "Afghanistan",
                                "Iraq",
                                "Tajikistan",
                                "Yemen", "Pakistan", "Timor-Leste", "Nepal", "Maldives",
                                "Qatar", "Kyrgyzstan", "Mongolia"
                            ],
                            "scheme":"category20b"
                        }
                    },
                        "opacity": {
                            "condition": {"param": "Country_highlight", "value": 0.8},
                            "value": 0.2
                        },
                        
                    "tooltip":[
                        {"field": "Country", "type": "nominal"},
                        {"field": "yearly_change", "type": "quantitative", "title":"Yearly % change in Population"}
                    ]
                    }
        }
    
    
    ],
    "resolve": {
        "legend": {
          "color": "independent",
          "size": "independent"
        }
      }

}
    

    